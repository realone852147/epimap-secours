<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="description" content="Epita-Map: Trouvez facilement votre salle √† Epita et oubliez les 404 Room Not Found" />
<meta name="keywords" content="Epimap Epita Map Plan Campus Epitech KB Villejuif" />
<meta name="author" content="Nathan Chevalier & Mateo S." />
<meta name="theme-color" content="#0d1230" />

<!-- Open Graph / SEO -->
<meta property="og:title" content="Epita-Map - Plans des campus"/>
<meta property="og:description" content="Trouvez facilement votre salle √† Epita"/>
<meta property="og:image" content="img/og-image.png"/>
<meta property="og:type" content="website"/>

<title>Epita-Map</title>
<link rel="icon" type="image/png" href="img/favicon.png" />

<style>
  /* Reset & Base */
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
    background: #f5f5f5;
    color: #333;
    transition: background 0.3s ease, color 0.3s ease;
  }

  body.darkmode {
    background: #0d1230;
    color: #e0e0e0;
  }

  /* Header */
  header {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1rem 2rem;
    background: white;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    position: sticky;
    top: 0;
    z-index: 100;
  }

  body.darkmode header {
    background: #1a1f3a;
    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
  }

  #btn-menu {
    cursor: pointer;
    display: flex;
    flex-direction: column;
    gap: 4px;
    padding: 8px;
  }

  #btn-menu div {
    width: 25px;
    height: 3px;
    background: #333;
    border-radius: 2px;
    transition: 0.3s;
  }

  body.darkmode #btn-menu div {
    background: #e0e0e0;
  }

  header input[type="text"] {
    flex: 1;
    padding: 0.75rem 1rem;
    border: 2px solid #ddd;
    border-radius: 8px;
    font-size: 1rem;
    outline: none;
    transition: border 0.2s;
  }

  header input[type="text"]:focus {
    border-color: #0066cc;
  }

  body.darkmode header input[type="text"] {
    background: #2a2f4a;
    border-color: #3a3f5a;
    color: #e0e0e0;
  }

  header button {
    padding: 0.75rem 1.5rem;
    background: #0066cc;
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 600;
    transition: background 0.2s;
  }

  header button:hover {
    background: #0052a3;
  }

  header button::before {
    content: "üîç";
    margin-right: 0.5rem;
  }

  /* Settings Button */
  #btn-settings {
    position: fixed;
    top: 5rem;
    right: 2rem;
    width: 50px;
    height: 50px;
    background: #0066cc;
    border-radius: 50%;
    cursor: pointer;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    z-index: 99;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.2s;
  }

  #btn-settings:hover {
    transform: scale(1.1);
  }

  #btn-settings::before {
    content: "‚öôÔ∏è";
    font-size: 1.5rem;
  }

  /* Navigation Menu */
  #nav-menu {
    position: fixed;
    left: -320px;
    top: 0;
    width: 300px;
    height: 100vh;
    background: white;
    box-shadow: 2px 0 8px rgba(0,0,0,0.1);
    padding: 2rem;
    transition: left 0.3s ease;
    z-index: 101;
    overflow-y: auto;
  }

  body.darkmode #nav-menu {
    background: #1a1f3a;
  }

  #nav-menu.active {
    left: 0;
  }

  #nav-menu .btn-back {
    display: inline-block;
    margin-bottom: 2rem;
    padding: 0.5rem 1rem;
    background: #0066cc;
    color: white;
    text-decoration: none;
    border-radius: 6px;
    font-size: 0.9rem;
    transition: background 0.2s;
  }

  #nav-menu .btn-back:hover {
    background: #0052a3;
  }

  #nav-menu ul {
    list-style: none;
  }

  #nav-menu li {
    margin-bottom: 0.5rem;
  }

  #nav-menu a.menu-itm-campus {
    display: block;
    padding: 1rem;
    background: #f0f0f0;
    color: #333;
    text-decoration: none;
    border-radius: 8px;
    font-weight: 600;
    transition: background 0.2s;
  }

  body.darkmode #nav-menu a.menu-itm-campus {
    background: #2a2f4a;
    color: #e0e0e0;
  }

  #nav-menu a.menu-itm-campus:hover {
    background: #e0e0e0;
  }

  body.darkmode #nav-menu a.menu-itm-campus:hover {
    background: #3a3f5a;
  }

  #infooter {
    margin-top: 3rem;
    padding-top: 2rem;
    border-top: 1px solid #ddd;
    font-size: 0.85rem;
    color: #666;
  }

  body.darkmode #infooter {
    border-color: #3a3f5a;
    color: #999;
  }

  #infooter a {
    color: #0066cc;
    text-decoration: none;
  }

  #infooter a:hover {
    text-decoration: underline;
  }

  /* Settings Panel */
  #settings {
    position: fixed;
    right: -320px;
    top: 0;
    width: 300px;
    height: 100vh;
    background: white;
    box-shadow: -2px 0 8px rgba(0,0,0,0.1);
    padding: 2rem;
    transition: right 0.3s ease;
    z-index: 101;
    overflow-y: auto;
  }

  body.darkmode #settings {
    background: #1a1f3a;
  }

  #settings.active {
    right: 0;
  }

  #settings h3 {
    margin-bottom: 2rem;
    font-size: 1.5rem;
  }

  .setting {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 1.5rem;
    padding: 1rem;
    background: #f9f9f9;
    border-radius: 8px;
  }

  body.darkmode .setting {
    background: #2a2f4a;
  }

  /* Toggle Switch */
  .onoffswitch {
    position: relative;
    width: 60px;
    user-select: none;
  }

  .onoffswitch-checkbox {
    position: absolute;
    opacity: 0;
    pointer-events: none;
  }

  .onoffswitch-label {
    display: block;
    overflow: hidden;
    cursor: pointer;
    height: 30px;
    padding: 0;
    line-height: 30px;
    border-radius: 30px;
    background-color: #ccc;
    transition: background-color 0.3s ease-in;
  }

  .onoffswitch-label:before {
    content: "";
    display: block;
    width: 26px;
    height: 26px;
    margin: 2px;
    background: white;
    position: absolute;
    top: 0;
    bottom: 0;
    right: 28px;
    border-radius: 50%;
    transition: all 0.3s ease-in 0s;
  }

  .onoffswitch-checkbox:checked + .onoffswitch-label {
    background-color: #0066cc;
  }

  .onoffswitch-checkbox:checked + .onoffswitch-label:before {
    right: 2px;
  }

  /* Container */
  #container {
    width: 100%;
    height: 80vh;
    min-height: 600px;
    overflow: auto;
    display: flex;
    align-items: center;
    justify-content: center;
    background: white;
  }

  body.darkmode #container {
    background: #0d1230;
  }

  #container svg {
    max-width: 100%;
    max-height: 100%;
  }

  /* Privacy Page */
  .privacy-page {
    background: #f9fafb !important;
    color: #111 !important;
    max-width: 800px;
    margin: 3rem auto;
    border-radius: 16px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    padding: 2rem;
  }

  .privacy-page h1 {
    font-size: 1.8rem;
    margin-bottom: 1rem;
  }

  .privacy-page h2 {
    font-size: 1.3rem;
    margin-top: 1.5rem;
    margin-bottom: 0.5rem;
  }

  .privacy-page ul {
    margin-left: 1.2rem;
    margin-bottom: 1rem;
  }

  .privacy-page li {
    margin-bottom: 0.5rem;
  }

  .privacy-page .btn-back {
    display: inline-block;
    margin-top: 2rem;
    padding: 0.75rem 1.5rem;
    background: #0066cc;
    color: #fff;
    border-radius: 8px;
    text-decoration: none;
    font-weight: 600;
    transition: background 0.2s ease;
  }

  .privacy-page .btn-back:hover {
    background: #004999;
  }

  /* Footer */
  footer {
    padding: 2rem;
    text-align: center;
    background: white;
    border-top: 1px solid #ddd;
    font-size: 0.9rem;
    color: #666;
  }

  body.darkmode footer {
    background: #1a1f3a;
    border-color: #3a3f5a;
    color: #999;
  }

  footer a {
    color: #0066cc;
    text-decoration: none;
  }

  footer a:hover {
    text-decoration: underline;
  }

  /* Map Label */
  #map-label {
    position: fixed;
    bottom: 2rem;
    left: 2rem;
    background: white;
    padding: 1rem;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    display: none;
  }

  body.darkmode #map-label {
    background: #1a1f3a;
  }

  /* Info Menu */
  #info-menu {
    position: fixed;
    right: -400px;
    top: 0;
    width: 380px;
    height: 100vh;
    background: white;
    box-shadow: -2px 0 8px rgba(0,0,0,0.1);
    padding: 2rem;
    transition: right 0.3s ease;
    z-index: 101;
    overflow-y: auto;
  }

  body.darkmode #info-menu {
    background: #1a1f3a;
  }

  #info-menu.active {
    right: 0;
  }

  .search-result {
    padding: 1rem;
    background: #f9f9f9;
    border-radius: 8px;
    margin-bottom: 1rem;
    cursor: pointer;
    transition: background 0.2s;
  }

  body.darkmode .search-result {
    background: #2a2f4a;
  }

  .search-result:hover {
    background: #e0e0e0;
  }

  body.darkmode .search-result:hover {
    background: #3a3f5a;
  }

  .search-result h4 {
    margin-bottom: 0.5rem;
  }

  .search-result span {
    color: #666;
    font-size: 0.9rem;
  }

  body.darkmode .search-result span {
    color: #999;
  }

  /* Responsive */
  @media (max-width: 768px) {
    header {
      padding: 0.75rem 1rem;
    }

    #nav-menu, #settings, #info-menu {
      width: 100%;
      left: -100%;
    }

    #settings {
      right: -100%;
    }

    #info-menu {
      right: -100%;
    }

    #btn-settings {
      right: 1rem;
      width: 45px;
      height: 45px;
    }
  }
</style>
</head>

<body class="darkmode">

<header>
  <div id="btn-menu" aria-label="Menu principal" role="button" tabindex="0">
    <div></div><div></div><div></div>
  </div>
  <input type="text" name="search" placeholder="Rechercher une salle, une personne..." aria-label="Recherche"/>
  <button aria-label="Lancer la recherche">Rechercher</button>
</header>

<div id="btn-settings" aria-label="Param√®tres" role="button"></div>

<nav id="info-menu" aria-label="Informations salle">
  <div>
    <div></div>
    <div>
      <h4>Nom de la salle</h4>
      <span>Description de la salle</span>
      <div>
        <div></div>
        <div>
          <h5>Nom de la personne</h5>
          <span>Description de la personne</span>
        </div>
      </div>
    </div>
  </div>
  <div>
    <div id="search-result-template" class="search-result">
      <h4>R√©sultat</h4>
      <span>Description</span>
    </div>
  </div>
</nav>

<nav id="nav-menu" aria-label="Navigation campus">
  <a href="#" class="btn-back" id="privacy-btn">‚Üê Vie Priv√©e</a>
  <ul>
    <li><a href="#kb" class="menu-itm-campus" data-map="kb">üè´ Kremlin-Bic√™tre</a></li>
    <li><a href="#vj" class="menu-itm-campus" data-map="vj">üè´ Villejuif</a></li>
    <li><a href="#lyon" class="menu-itm-campus" data-map="lyon">üè´ Lyon</a></li>
    <li><a href="#toulouse" class="menu-itm-campus" data-map="toulouse">üè´ Toulouse</a></li>
    <li><a href="#special" class="menu-itm-campus" data-map="special">‚≠ê SP√âCIALES</a></li>
  </ul>
  <div id="infooter">
    <p>
      Epita-Map.fr est un projet √©tudiant ind√©pendant, non affili√© √† IONIS Education Group.<br/>
      Maintainers : Nathan Chevalier & Mateo S.<br/>
      H√©berg√© avec üíñ par Mateo S.<br/>
      <a href="https://github.com/realone852147/epimap-secours" target="_blank">Contribuer sur GitHub</a>
    </p>
  </div>
</nav>

<section id="settings" aria-label="Param√®tres">
  <h3>Param√®tres</h3>
  <div class="setting">
    <span>Mode Sombre</span>
    <div class="onoffswitch">
      <input type="checkbox" name="darkmodeSwitch" class="onoffswitch-checkbox" id="darkmodeSwitch" tabindex="0" checked>
      <label class="onoffswitch-label" for="darkmodeSwitch"></label>
    </div>
  </div>
  <div class="setting">
    <span>Enrichir l'affichage</span>
    <div class="onoffswitch">
      <input type="checkbox" name="enrichedSwitch" class="onoffswitch-checkbox" id="enrichedSwitch" tabindex="0">
      <label class="onoffswitch-label" for="enrichedSwitch"></label>
    </div>
  </div>
  <div class="setting">
    <span>Langue</span>
    <select aria-label="Langue">
      <option value="fr">üá´üá∑ FR</option>
      <option value="en">üá¨üáß EN</option>
    </select>
  </div>
</section>

<section id="container" contenturl="maps/kb.svg">
  <div style="text-align: center; color: #666;">
    <h2>Bienvenue sur Epita-Map</h2>
    <p>S√©lectionnez un campus dans le menu pour afficher le plan</p>
  </div>
</section>

<section id="map-label" aria-label="√âtiquette carte">
  <div class="map-icon"></div>
  <div><div>Information</div></div>
</section>

<footer>
  <p>
    Epita-Map.fr ‚Äî Projet √©tudiant ind√©pendant.<br/>
    Maintainers : Nathan Chevalier & Mateo S.<br/>
    H√©berg√© par Mateo S. üíñ<br/>
    <a href="https://github.com/realone852147/epimap-secours" target="_blank">Contribuer sur GitHub</a><br/>
    <a href="#privacy" id="footer-privacy-link">Politique de confidentialit√©</a> | 
    <a href="#mentions" id="footer-mentions-link">Mentions l√©gales</a>
  </p>
</footer>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const body = document.body;
  const btnMenu = document.getElementById("btn-menu");
  const btnSettings = document.getElementById("btn-settings");
  const navMenu = document.getElementById("nav-menu");
  const settings = document.getElementById("settings");
  const container = document.getElementById("container");
  const darkmodeSwitch = document.getElementById("darkmodeSwitch");
  const privacyBtn = document.getElementById("privacy-btn");
  const footerPrivacyLink = document.getElementById("footer-privacy-link");

  // Toggle Menu
  btnMenu.addEventListener("click", () => {
    navMenu.classList.toggle("active");
    settings.classList.remove("active");
  });

  // Toggle Settings
  btnSettings.addEventListener("click", () => {
    settings.classList.toggle("active");
    navMenu.classList.remove("active");
  });

  // Dark Mode Toggle
  darkmodeSwitch.addEventListener("change", () => {
    body.classList.toggle("darkmode");
  });

  // Privacy Page HTML
  const privacyHTML = `
    <main class="privacy-page">
      <h1>Politique de confidentialit√© ‚Äî Epita-Map</h1>
      <p><strong>Epita-Map</strong> ne collecte, ne stocke et ne partage aucune donn√©e personnelle.</p>

      <h2>1. Donn√©es collect√©es</h2>
      <ul>
        <li>Aucune g√©olocalisation automatique.</li>
        <li>Aucun compte utilisateur, aucun cookie de suivi.</li>
        <li>Les adresses IP ne sont pas visibles par le serveur (tout le trafic passe via Cloudflare).</li>
      </ul>

      <h2>2. S√©curit√©</h2>
      <p>Le site est prot√©g√© par Cloudflare (HTTPS, anti-DDoS). Les logs sont purement techniques, anonymes et temporaires.</p>
      <p>Le trafic passe via Cloudflare pour des raisons de s√©curit√© : <a href="https://www.cloudflare.com/fr-fr/privacypolicy/" target="_blank">Politique Cloudflare</a>.</p>

      <h2>3. Conservation</h2>
      <p>Aucune donn√©e n'est conserv√©e de mani√®re persistante. Le serveur est r√©initialis√© automatiquement pour garantir qu'aucune trace n'est gard√©e.</p>

      <h2>4. Mentions l√©gales</h2>
      <p>Responsable du site : Nathan Chevalier & Mateo S.<br/>
      Email : <a href="mailto:nathan.chevalier@epita.fr">nathan.chevalier@epita.fr</a>, 
      <a href="mailto:mateo.schwab@epita.fr">mateo.schwab@epita.fr</a><br/>
      H√©bergeur : [Nom h√©bergeur], [Adresse]<br/>
      Finalit√© : Mise √† disposition interactive des plans des campus Epita.</p>

      <h2>5. Contact</h2>
      <p>Pour toute question : <a href="mailto:contact@epita-map.fr">contact@epita-map.fr</a></p>

      <a href="#" id="btn-return" class="btn-back">‚Üê Retourner sur la carte</a>
    </main>
  `;

  // Show Privacy Page
  function showPrivacy(e) {
    e.preventDefault();
    document.querySelectorAll("header, #btn-settings, #info-menu, #nav-menu, #settings, #map-label, footer")
      .forEach(el => el.style.display = "none");
    container.innerHTML = privacyHTML;
    container.style.height = "auto";
  }

  privacyBtn.addEventListener("click", showPrivacy);
  footerPrivacyLink.addEventListener("click", showPrivacy);

  // Return from Privacy
  document.body.addEventListener("click", (e) => {
    if (e.target && e.target.id === "btn-return") {
      e.preventDefault();
      container.innerHTML = `
        <div style="text-align: center; color: #666;">
          <h2>Bienvenue sur Epita-Map</h2>
          <p>S√©lectionnez un campus dans le menu pour afficher le plan</p>
        </div>
      `;
      container.style.height = "80vh";
      document.querySelectorAll("header, #btn-settings, #info-menu, #nav-menu, #settings, #map-label, footer")
        .forEach(el => el.style.display = "");
    }
  });

  // Close menus on outside click
  document.addEventListener("click", (e) => {
    if (!navMenu.contains(e.target) && !btnMenu.contains(e.target)) {
      navMenu.classList.remove("active");
    }
    if (!settings.contains(e.target) && !btnSettings.contains(e.target)) {
      settings.classList.remove("active");
    }
  });

  // Campus selection (placeholder - you'll need to load actual SVG maps)
  document.querySelectorAll(".menu-itm-campus").forEach(link => {
    link.addEventListener("click", (e) => {
      e.preventDefault();
      const campus = e.target.dataset.map;
      container.innerHTML = `
        <div style="text-align: center; color: #666;">
          <h2>Plan du campus ${e.target.textContent}</h2>
          <p>Chargement en cours...</p>
          <p style="font-size: 0.9rem; margin-top: 1rem;">
            (Connectez vos fichiers SVG maps/${campus}.svg pour afficher le plan)
          </p>
        </div>
      `;
      navMenu.classList.remove("active");
    });
  });
});
</script>

</body>
</html>
